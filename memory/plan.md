# 计划

- 需求澄清
  - ✅ 阅读任务背景与项目约束（AGENTS.md）
  - ✅ 通过 `gh pr view 2 --comments` 获取 PR #2 评论
  - ✅ 明确需要修改的文件/行为与验收标准
  - ✅ 记录假设：工作区其他改动文件暂不纳入本次调整（保持现状）
- 设计
  - ✅ 根据评论整理变更点与影响范围
  - ✅ 评估潜在风险与测试范围
- 开发
  - ✅ 按评论修改代码/文档（保持 TypeScript 类型与中文注释规范）
  - ✅ 必要时补充测试用例（已调整测试断言）
  - ✅ 修复 execa 在 CommonJS + ts-node 下的动态加载问题
- 自审
  - ✅ 对照评论逐项自查覆盖与边界
- 测试
  - ✅ 已执行 `yarn test tests/run-command-stream.test.ts`
  - ✅ 已执行 `yarn test`（脚本实际运行 `tests/**/*.ts`）
  - ✅ 已执行 `yarn e2e`
- PR
  - ⬜ 整理 PR 标题/描述与测试结果
  - ⬜ 如需更新 PR，使用 `gh` 命令补充说明
